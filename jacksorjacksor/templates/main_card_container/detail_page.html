{% extends "base.html" %}

{% load static wagtailcore_tags wagtailimages_tags debugger_tags quick_tag category_tag wagtailroutablepage_tags %} 

{% block body_class %}{{ page.title | lower }}{% endblock %}

{% block content %}

<!-- HERO -->

    <section class="hero-section">
        <div class="hero-container">
            <a
                href="music-detail-view-recordings-page.html"
                class="hero-link"
            >
                <div class="hero-inner-container">
                    <div class="hero-latest-release"></div>
                    <div class="hero-title"><h2>{{ page.title }}</h2></div>
                    <div class="hero-image">
                        {% image page.header_image fill-250x250 class="hero-image" %}
                        <div class="category">
                            <i class="fas fa-{{ page.categories.first.category.icon }}"></i>
                        </div>
                    </div>
                    <div class="hero-date-label">
                        <p><small>{{page.last_published_at}}</small></p>
                    </div>
                    <div class="hero-description">
                        {{ page.description }}
                    </div>
                </div>
            </a>
        </div>
    </section>

    <!-- DETAILS -->
    <section class="detail-body-container">
        {% include "components/streamfield.html" %}
    </section>
    <div class="divider"></div>
    
    {% categories_list %}

    <section class="items">
        <div class="item-container">
            {% for card in posts %}
                {% ifequal card.detailpage.categories.first.category.title page.categories.first.category.title %}
            {% comment %} {{ card | pdb }} {% endcomment %}
                    <div class="item-card">
                        <a href="{% pageurl card %}">
                            <div class="item-title">{{ card.title }}</div>
                            <div class="item-image-wrapper">
                                {% image card.detailpage.header_image fill-250x250 class="item-image" %}
                                <div class="item-category">
                                    <i class="fas fa-{{ card.detailpage.categories.first.category.icon }}"></i>
                                </div>
                            </div>
                            <div class="item-date-label">
                                <p><small>{{ card.last_published_at}}</small></p>
                            </div>
                            <div class="item-date-label">
                                <p>{{ card.description }}</p>
                            </div>
                        </a>
                    </div>
                {% endifequal %}
            {% endfor %}
        </div>
    </section>
    <section class="back-home">
        <a href="music-list-view-page.html">Back to Music</a>
    </section>

{% endblock content %}